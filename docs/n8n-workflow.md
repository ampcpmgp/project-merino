# n8n workflow

## workflow prefix

- 🚀 -> 本番ワークフロー
- 🚧 -> 開発ワークフロー
- ⚓️ -> 定数サブワークフロー
- ⚡️ -> コマンドサブワークフロー
- 🧩 -> モジュールサブワークフロー
- 🎠 -> playground ワークフロー
- ✅ -> 内部ノードテスト
- 🛡️ -> 外部連携ノードテスト
- 🚫 -> 利用禁止

※ prefix は複数指定可能

## テスト戦略

原則、サブワークフローは以下いずれかのテストを実行する必要がある。

どれを選択するかは、サブワークフローの実装内容に依存する。

### 共通定義

- 一般ケース: AAA (Arrange, Act, Assert) パターンを利用する
- Cleanup が必要なケース
  - CSAAAC (Cleanup, Setup, Arrange, Act, Assert, Cleanup) パターンを利用する ^1
  - 内側と外側の Cleanup は他のテストで利用できる場合、サンドイッチ構造にできる

^1 途中実行時 Act が実行されない場合があるため、 Cleanup を最初に実行する

### ✅ 内部ノードテスト

- サブワークフローで外部サービス連携を行わない
- テストカバレッジを意識したテストを実施

### 🛡️ 外部連携ノードテスト

- サブワークフローで外部サービス連携を行う
- テスト時に実際の外部サービスを利用する
- システム全体の動作を検証する
